<div id="nav-container" class="flex items-center justify-between py-4 px-6 bg-natural-900 shadow-md relative">
  <!-- Borde difuminado -->
  <div class="absolute inset-x-0 bottom-0 h-px">
    <!-- Gradiente de izquierda a derecha -->
    <div class="w-full h-full bg-gradient-to-r from-transparent via-white to-natural-900"></div>
    <!-- Gradiente de derecha a izquierda -->
    <div class="w-full h-full bg-gradient-to-l from-natural-900 via-white to-transparent"></div>
  </div>
  <!-- Botón para el menú de categorías -->
<div class="relative inline-block" (mouseenter)="keepMenuOpen()" (mouseleave)="checkCloseMenu()">
  <button class="bg-black text-white font-bold py-2 px-4 rounded-full border border-gray-200 border-opacity-10 hover:bg-gray-700 hover:border-opacity-50 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-opacity-50">
    Categorías
  </button>

  <!-- Menú desplegable para las categorías -->
  <div *ngIf="menuOpen" class="absolute bg-black mt-2 rounded-lg shadow-lg z-10" id="categoryMenu" (mouseenter)="keepMenuOpen()" (mouseleave)="checkCloseMenu()">
    <div class="p-3 divide-y divide-solid divide-gray-700">
      <div *ngFor="let categoria of categorias" class="py-3">
        <a (click)="navigateToCategoria(categoria.id)" class="block flex items-center py-2 px-4 text-white hover:bg-gray-700 rounded-full">
          
          <span class="text-base font-bold">{{ categoria.nombre }}</span>
        </a>
      </div>
    </div>
  </div>
</div>

<div id="logo-wrapper">
  <a routerLink="home"><img src="./assets/img/logo.gif" id="logo-home"></a>
</div>

<!-- Botón para el carrito de compras -->
<button mat-icon-button [matMenuTriggerFor]="cartMenu" id="carrito">
  <mat-icon
    [ngStyle]="{'color': 'white'}"
    [matBadge]="itemsQuantity"
    [matBadgeHidden]="!itemsQuantity"
    matBadgeColor="warn"
  >shopping_cart</mat-icon>
</button>

<!-- Menú para el carrito de compras -->
<mat-menu #cartMenu="matMenu">
  <div class="p-3 divide-y divide-solid">
    <div class="pb-3 flex justify-between">
      <span class="mr-16">{{ cart.items.length }} Artículos</span>
      <a routerLink="cart">Carrito</a>
    </div>
    <div *ngIf="cart.items.length" class="py-3">
      <div
        *ngFor="let item of cart.items"
        class="flex justify-between font-light mb-2"
      >
        {{ item.name }} x {{ item.quantity }}
        <span class="font-bold not-italic">{{ item.price | currency }}</span>
      </div>
    </div>
    <div class="flex justify-between py-3 font-light">
      Total:
      <span class="font-bold not-italic">{{ getTotal(cart.items) | currency }}</span>
    </div>
    <div class="pt-3 flex justify-between">
      <button
        (click)="onClearCart()"
        class="bg-rose-600 text-white rounded-full w-9 h-9"
      >
        <mat-icon
          [ngStyle]="{'color': 'black'}"
        >remove_shopping_cart</mat-icon>
      </button>
      <button
        routerLink="cart"
        class="bg-green-600 text-white rounded-full w-9 h-9"
      >
        <mat-icon
          [ngStyle]="{'color': 'black'}"
        >shopping_cart_checkout</mat-icon>
      </button>
    </div>
  </div>
</mat-menu>

<!-- Botón para el perfil de usuario -->
<button mat-icon-button [matMenuTriggerFor]="userMenu" id="user-profile">
  <mat-icon [ngStyle]="{'color': 'white'}">account_circle</mat-icon>
</button>

<!-- Menú para el perfil de usuario -->
<mat-menu #userMenu="matMenu">
  <div class="p-3 divide-y divide-solid">
    <div class="pb-3 flex justify-between">
      <div>
        <span class="user-name" *ngIf="emailUsuario !== ''">
          {{ emailUsuario }}
        </span>
      </div>
    </div>
    <div class="py-3">
      @if (roleAdmin){
        <button *ngIf="estadoSesion" mat-menu-item routerLink="/admin">
          <mat-icon>
           <svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 122.88 116.17"><defs><style>.cls-1{fill-rule:evenodd;}</style></defs><title>user-settings</title><path class="cls-1" d="M0,107.68c0-32.08,26.21-21,35-32.2,6.45,15.23,29.74,13.94,37.63,0A11.7,11.7,0,0,0,76,78a8.26,8.26,0,0,0,.4,5.29l.27.55a11.12,11.12,0,0,0-1.24.39,8.54,8.54,0,0,0-4.55,4.55l-.2.58a8.37,8.37,0,0,0-.41,2.57v5.27a8.25,8.25,0,0,0,.63,3.16l.25.51A8.42,8.42,0,0,0,72.6,103l.14.14a8.18,8.18,0,0,0,2.59,1.75l.66.24a8.47,8.47,0,0,0-1.06,2.56ZM115.64,79.32a2,2,0,0,0-2.9,0l-2.22,2.21a15.3,15.3,0,0,0-1.87-1,19,19,0,0,0-2-.78V76.34a2,2,0,0,0-.59-1.46,2,2,0,0,0-1.45-.59h-4.26a2,2,0,0,0-1.43.59,2,2,0,0,0-.61,1.46v3.1a15.41,15.41,0,0,0-2.06.64,15.89,15.89,0,0,0-1.91.88l-2.45-2.42a1.88,1.88,0,0,0-1.42-.61,2,2,0,0,0-1.45.61l-3,3a2,2,0,0,0,0,2.9l2.21,2.22a14.06,14.06,0,0,0-1,1.87,19,19,0,0,0-.78,2H83a2,2,0,0,0-2,2v4.26a2,2,0,0,0,.59,1.43,1.94,1.94,0,0,0,1.45.61h3.11a15.41,15.41,0,0,0,.64,2.06,19,19,0,0,0,.87,1.95l-2.41,2.41a1.85,1.85,0,0,0-.61,1.42,2,2,0,0,0,.61,1.45l3,3a2.13,2.13,0,0,0,2.9,0l2.21-2.25a14.18,14.18,0,0,0,1.88,1,19.67,19.67,0,0,0,2,.78v3.4a2,2,0,0,0,2,2h4.26a2,2,0,0,0,2-2V111a17,17,0,0,0,2.06-.63c.67-.26,1.32-.56,2-.88l2.41,2.41a1.86,1.86,0,0,0,1.43.62,1.9,1.9,0,0,0,1.44-.62l3-3a2.13,2.13,0,0,0,0-2.9l-2.25-2.21a14.18,14.18,0,0,0,1-1.88,19.67,19.67,0,0,0,.78-2h3.39a2,2,0,0,0,1.46-.6,2,2,0,0,0,.59-1.45V93.63a2,2,0,0,0-.59-1.43,2,2,0,0,0-1.46-.6h-3.1a17.31,17.31,0,0,0-.64-2,15.49,15.49,0,0,0-.88-1.93l2.42-2.45a1.88,1.88,0,0,0,.61-1.41,2.05,2.05,0,0,0-.61-1.46l-3-3Zm-13.7,7.57a8.27,8.27,0,0,1,3.25.65A8.23,8.23,0,0,1,109.63,92a8.45,8.45,0,0,1,0,6.5,8.23,8.23,0,0,1-4.44,4.44,8.45,8.45,0,0,1-6.5,0,8.23,8.23,0,0,1-4.44-4.44,8.45,8.45,0,0,1,0-6.5,8.23,8.23,0,0,1,4.44-4.44,8.27,8.27,0,0,1,3.25-.65ZM30.74,42a5,5,0,0,0-2.67.7,2,2,0,0,0-.77.88A3.11,3.11,0,0,0,27.05,45c.05,1.62.89,3.73,2.53,6.17l0,0h0l5.31,8.45C37,63.05,39.28,66.5,42.06,69a14.58,14.58,0,0,0,10.19,4.1A15,15,0,0,0,63,68.86c2.86-2.68,5.13-6.36,7.35-10l6-9.86c1.12-2.55,1.53-4.26,1.27-5.25-.15-.6-.81-.89-1.93-.95-.24,0-.48,0-.73,0l-.84.05a1.75,1.75,0,0,1-.46,0A9.15,9.15,0,0,1,72,42.7l2.06-9.08c-15.22,2.4-26.6-8.9-42.68-2.26l1.16,10.7A9.16,9.16,0,0,1,30.74,42Zm47-1.92A3.89,3.89,0,0,1,80.56,43c.43,1.67,0,4-1.46,7.26h0l-.09.17L73,60.4c-2.33,3.84-4.7,7.7-7.86,10.66a17.86,17.86,0,0,1-12.83,5.09A17.46,17.46,0,0,1,40,71.26c-3.07-2.82-5.42-6.45-7.66-10l-5.32-8.45c-1.94-2.9-3-5.55-3-7.72a6.2,6.2,0,0,1,.52-2.77,5.22,5.22,0,0,1,1.82-2.12,6,6,0,0,1,1.29-.65,136.66,136.66,0,0,1-.25-15.2,21.8,21.8,0,0,1,.65-3.43,20.41,20.41,0,0,1,9-11.45,28.41,28.41,0,0,1,7.53-3.35c1.68-.48-1.44-5.88.31-6C53.33-.8,67,6.9,72.88,13.28c2.94,3.2,4.8,7.42,5.2,13l-.33,13.78Z"/></svg></mat-icon>
          <span>Administrador</span>
        </button>
      }@else {
        <button *ngIf="estadoSesion" mat-menu-item routerLink="/perfil">
          <mat-icon>person</mat-icon>
          <span>Ver Perfil</span>
        </button>
        <button *ngIf="estadoSesion" mat-menu-item routerLink="/orders">
          <mat-icon><svg class="h-6 w-6 text-stone-500"  width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">  <path stroke="none" d="M0 0h24v24H0z"/>  <circle cx="7" cy="17" r="2" />  <circle cx="17" cy="17" r="2" />  <path d="M5 17h-2v-11a1 1 0 0 1 1 -1h9v12m-4 0h6m4 0h2v-6h-8m0 -5h5l3 5" /></svg></mat-icon>
          <span>Ver pedidos</span>
        </button>
      }
      <button *ngIf="!estadoSesion" mat-menu-item routerLink="/login">
        <mat-icon>login</mat-icon>
        <span>Iniciar Sesión</span>
      </button>
      <!-- Botón de cierre de sesión -->
      <button *ngIf="estadoSesion" mat-menu-item (click)="onLogout()">
        <mat-icon class="material-symbols-outlined" [ngStyle]="{'color': 'red'}">
          <svg class="h-6 w-6" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z"/>
            <path d="M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"/>
            <path d="M7 12h14l-3 -3m0 6l3 -3"/>
          </svg>
        </mat-icon>
        <span>Cerrar Sesión</span>
      </button>
    </div>
  </div>
</mat-menu>
</div>