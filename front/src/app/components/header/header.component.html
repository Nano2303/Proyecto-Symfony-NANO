<div id="nav-container">

  <!-- Botón para el menú de categorías -->
  <div class="relative inline-block" (mouseenter)="keepMenuOpen()" (mouseleave)="checkCloseMenu()">
    <button class="bg-black text-white font-bold py-2 px-4 rounded-full border border-gray-200 border-opacity-10 hover:bg-gray-700 hover:border-opacity-50 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-opacity-50">
      Categorías
    </button>

    <!-- Menú desplegable para las categorías -->
    <div *ngIf="menuOpen" class="absolute bg-black mt-2 rounded-lg shadow-lg z-10" id="categoryMenu" (mouseenter)="keepMenuOpen()" (mouseleave)="checkCloseMenu()">
      <div class="p-3 divide-y divide-solid divide-gray-700">
        <div class="py-3">
          <a routerLink="/categoria1" class="block flex items-center py-2 px-4 text-white hover:bg-gray-700 rounded-full">
            <span class="material-icons mr-2 text-white">category</span>
            <span class="text-base font-bold">Categoría 1</span>
          </a>
          <a routerLink="/categoria2" class="block flex items-center py-2 px-4 text-white hover:bg-gray-700 rounded-full">
            <span class="material-icons mr-2 text-white">category</span>
            <span class="text-base font-bold">Categoría 2</span>
          </a>
          <a routerLink="/categoria3" class="block flex items-center py-2 px-4 text-white hover:bg-gray-700 rounded-full">
            <span class="material-icons mr-2 text-white">category</span>
            <span class="text-base font-bold">Categoría 3</span>
          </a>
        </div>
      </div>
    </div>
  </div>

<div id="logo-wrapper">
  <a routerLink="home"><img src="./assets/img/logo.gif" id="logo-home"></a>
</div>

<!-- Botón para el carrito de compras -->
<button mat-icon-button [matMenuTriggerFor]="cartMenu" id="carrito">
  <mat-icon
    [ngStyle]="{'color': 'white'}"
    [matBadge]="itemsQuantity"
    [matBadgeHidden]="!itemsQuantity"
    matBadgeColor="warn"
  >shopping_cart</mat-icon>
</button>

<!-- Menú para el carrito de compras -->
<mat-menu #cartMenu="matMenu">
  <div class="p-3 divide-y divide-solid">
    <div class="pb-3 flex justify-between">
      <span class="mr-16">{{ cart.items.length }} Artículos</span>
      <a routerLink="cart">Carrito</a>
    </div>
    <div *ngIf="cart.items.length" class="py-3">
      <div
        *ngFor="let item of cart.items"
        class="flex justify-between font-light mb-2"
      >
        {{ item.name }} x {{ item.quantity }}
        <span class="font-bold not-italic">{{ item.price | currency }}</span>
      </div>
    </div>
    <div class="flex justify-between py-3 font-light">
      Total:
      <span class="font-bold not-italic">{{ getTotal(cart.items) | currency }}</span>
    </div>
    <div class="pt-3 flex justify-between">
      <button
        (click)="onClearCart()"
        class="bg-rose-600 text-white rounded-full w-9 h-9"
      >
        <mat-icon
          [ngStyle]="{'color': 'black'}"
        >remove_shopping_cart</mat-icon>
      </button>
      <button
        routerLink="cart"
        class="bg-green-600 text-white rounded-full w-9 h-9"
      >
        <mat-icon
          [ngStyle]="{'color': 'black'}"
        >shopping_cart_checkout</mat-icon>
      </button>
    </div>
  </div>
</mat-menu>

<!-- Botón para el perfil de usuario -->
<button mat-icon-button [matMenuTriggerFor]="userMenu" id="user-profile">
  <mat-icon [ngStyle]="{'color': 'white'}">account_circle</mat-icon>
</button>

<!-- Menú para el perfil de usuario -->
<mat-menu #userMenu="matMenu">
  <div class="p-3 divide-y divide-solid">
    <div class="pb-3 flex justify-between">
      <div>
        <span class="user-name" *ngIf="emailUsuario !== ''">
          {{ emailUsuario }}
        </span>
      </div>
    </div>
    <div class="py-3">
      <button *ngIf="estadoSesion" mat-menu-item routerLink="/perfil">
        <mat-icon>person</mat-icon>
        <span>Ver Perfil</span>
      </button>
      <button *ngIf="!estadoSesion" mat-menu-item routerLink="/login">
        <mat-icon>login</mat-icon>
        <span>Iniciar Sesión</span>
      </button>
      <!-- Botón de cierre de sesión -->
      <button *ngIf="estadoSesion" mat-menu-item (click)="onLogout()">
        <mat-icon class="material-symbols-outlined" [ngStyle]="{'color': 'red'}">
          <svg class="h-6 w-6" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z"/>
            <path d="M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"/>
            <path d="M7 12h14l-3 -3m0 6l3 -3"/>
          </svg>
        </mat-icon>
        <span>Cerrar Sesión</span>
      </button>
    </div>
  </div>
</mat-menu>

</div>